Widescreen patch
Rose
Old: Model hidden based on camera panning and global flags
New: No more hiding, added animation
--- original
+++ modified
## FIRST SCENE ##
@@ -153,6 +153,29 @@
 call 99, 0x0
 call 97, 0x0
 LABEL_23:
# Disable animation, wait for Haschel/Meru embarrassment flag
+call 99, 1
+mov 0x38, stor[24]
+mov 1, stor[25]
+gosub inl[:LABEL_1]
+mov 15, stor[24]
+wait stor[24]
# Animation: shake head
+mov 7, stor[25]
+mov 0xffffffff, stor[26]
+gosub inl[:ANIMATION]
+rewind
+ANIMATION:
+call 99, 0
+call 97, stor[25]
+ANIMATION_WAIT:
+yield
+call 100, stor[27]
+jmp_cmp ==, stor[27], 0, inl[:ANIMATION_WAIT]
+jmp_cmp ==, stor[26], 0xffffffff, inl[:FREEZE]
+call 97, stor[26]
+return
+FREEZE:
+call 99, 1
+return
 yield
 call 257, stor[24], stor[25]
 jmp_cmp <, 0xfffffff1, stor[24], inl[:LABEL_23]
## SECOND SCENE ##
@@ -165,20 +188,21 @@
 call 99, 0x0
 call 97, 0xb
 call 99, 0x1
# Instead of hiding model when flag 0x8 is set, start animation when flag 0x62 is set
-mov 0x8, stor[24]
+mov 0x62, stor[24]
 mov 0x1, stor[25]
 gosub inl[:LABEL_1]
-call 106, 0x1
# Animation: stand up from leaning against wall
+mov 11, stor[25]
+mov 0xffffffff, stor[26]
+gosub inl[:ANIMATION]
 mov 0xd, stor[24]
 mov 0x1, stor[25]
 gosub inl[:LABEL_1]
# Delay enabled shadow
-call 311, stor[0]
-call 106, 0x0
 mov 0x74, stor[24]
 mov 0xa0, stor[25]
 mov 0x5, stor[26]
 mov 0x0, stor[27]
 gosub inl[:LABEL_10]
+call 311, stor[0]
 mov 0x74, stor[24]
 mov 0xfffffff6, stor[25]
 mov 0xa0, stor[26]
